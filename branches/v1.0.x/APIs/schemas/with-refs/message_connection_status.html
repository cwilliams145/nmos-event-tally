---
layout: default
title: Schema message_connection_status.json
---

<html>
<meta charset="UTF-8">
<h2>Schema message_connection_status.json</h2>
<p>
    <a href="../../schemas/resolved/message_connection_status.html">Resolve referenced schemas (may reorder keys)</a>
</p>
<div id="json-render">
<script type="text/javascript" src="codemirror/lib/codemirror.js"></script>
<link rel="stylesheet" href="codemirror/lib/codemirror.css">
<link rel="stylesheet" href="codemirror/addon/fold/foldgutter.css">
<script src="codemirror/mode/javascript/javascript.js"></script>
<script src="codemirror/addon/fold/foldcode.js"></script>
<script src="codemirror/addon/fold/foldgutter.js"></script>
<script src="codemirror/addon/fold/brace-fold.js"></script>
<script src="codemirror/addon/fold/indent-fold.js"></script>

<style>
  .CodeMirror {
    border-top: 1px solid black; 
    border-bottom: 1px solid black;
    height: 500px;
  }
</style>

<textarea id="mytextarea">
{
  "$id": "https://www.amwa.tv/event_and_tally/message_connection_status.json",
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "description": "Message that indicates the status of the connection between the MQTT client and the broker. If connection status messages are used, the publishing topic is connection specific and must be specified in the connection_status_broker_topic parameter of the MQTT IS-05 transport parameters object. The client must publish this message with the RETAIN flag set, after opening the connection to the broker and before closing the connection normally. The client must also configure a retained Will Message indicating it is disconnected.",
  "title": "Connection status message",
  "required": [
    "message_type",
    "active"
  ],
  "properties": {
    "message_type": {
      "description": "A fixed string showing this is a connection status message",
      "type": "string",
      "pattern": "^connection_status$"
    },
    "active": {
      "description": "A boolean value showing whether the MQTT client is connected to the broker.",
      "type": "boolean"
    }
  }
}
</textarea>
<script>
window.editor_json = CodeMirror.fromTextArea(mytextarea, {
    mode: {
        name: "javascript",
        json: true
    },
    readOnly: true,
    lineNumbers: true,
    lineWrapping: true,
    extraKeys: {"Ctrl-Q": function(cm){ cm.foldCode(cm.getCursor()); }},
    foldGutter: true,
    gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"],
    foldOptions: {
      widget: (from, to) => {
        var count = undefined;

        // Get open / close token
        var startToken = '{', endToken = '}';
        var prevLine = window.editor_json.getLine(from.line);
        if (prevLine.lastIndexOf('[') > prevLine.lastIndexOf('{')) {
          startToken = '[', endToken = ']';
        }

        // Get json content
        var internal = window.editor_json.getRange(from, to);
        var toParse = startToken + internal + endToken;

        // Get key count
        try {
          var parsed = JSON.parse(toParse);
          count = Object.keys(parsed).length;
        } catch(e) { }

        return count ? `\u21A4${count}\u21A6` : '\u2194';
        }
      }
    }
  );
editor_json.
editor_json.foldCode(CodeMirror.Pos(3, 0));
</script>
</div>
</html>
